<!-- Pet Announcements Slider Section -->
<section class="pet-announcements py-5">
     <div class="container">
          <h2 class="section-title mb-4">Dernières Annonces</h2>
          <div class="position-relative announcement-slider-container">
               <div class="swiper-container announcement-slider">
                    <div class="swiper-wrapper">
                         <% announcements.forEach(announcement=> { %>
                              <div class="swiper-slide">
                                   <div class="card h-100">
                                        <img src="<%= announcement.images[0] %>" alt="<%= announcement.title %>" class="card-img-top" style="height: 200px; object-fit: cover;">
                                        <div class="card-body d-flex flex-column">
                                             <h5 class="card-title">
                                                  <%= announcement.title %>
                                             </h5>

                                             <!-- Pet Details -->
                                             <ul class="list-unstyled mb-3">
                                                  <li><strong>Race:</strong>
                                                       <%= announcement.breed || 'Non spécifié' %>
                                                  </li>
                                                  <li><strong>Âge:</strong>
                                                       <%= announcement.age || 'Non spécifié' %>
                                                  </li>
                                                  <li><strong>Genre:</strong>
                                                       <%= announcement.gender==='male' ? 'Mâle' : announcement.gender==='female' ? 'Femelle' : 'Non spécifié' %>
                                                  </li>
                                                  <li><strong>Lieu:</strong>
                                                       <%= announcement.location || 'Non spécifié' %>
                                                  </li>
                                             </ul>

                                             <!-- Shortened description -->
                                             <p class="card-text flex-grow-1">
                                                  <%= announcement.description.substring(0, 100) %>...
                                             </p>

                                             <!-- Call to action -->
                                             <a href="/announcement/<%= announcement._id %>" class="btn btn-primary mt-auto">Voir Détails</a>
                                        </div>
                                   </div>

                              </div>
                              <% }) %>
                    </div>
               </div>
               <div class="swiper-button-next"></div>
               <div class="swiper-button-prev"></div>
          </div>
          <div class="text-center mt-4">
               <a href="/tous-les-annonces" class="btn btn-secondary">Voir plus</a>
          </div>
     </div>
</section>

<style>
     .pet-announcements .announcement-slider-container {
          overflow: hidden;
          padding: 20px 0;
     }

     .pet-announcements .swiper-container {
          overflow: visible;
     }

     .pet-announcements .swiper-slide {
          height: auto;
     }

     .pet-announcements .swiper-button-next,
     .pet-announcements .swiper-button-prev {
          color: #007bff;
     }

     @media (max-width: 768px) {
          .pet-announcements .swiper-container {
               overflow: visible;
          }

          .pet-announcements .swiper-button-next,
          .pet-announcements .swiper-button-prev {
               opacity: 0.5;
               transform: scale(0.8);
               transition: opacity 0.3s ease, transform 0.3s ease;
          }

          .pet-announcements .swiper-button-next:hover,
          .pet-announcements .swiper-button-prev:hover {
               opacity: 1;
               transform: scale(1);
          }

          .pet-announcements .swiper-button-next {
               right: 5px;
          }

          .pet-announcements .swiper-button-prev {
               left: 5px;
          }
     }

     .pet-announcements .swiper-button-next,
     .pet-announcements .swiper-button-prev {
          background-color: #000000;
          padding: 30px !important;
          color: white;
          border-radius: 10px;
     }
</style>

<script src="https://unpkg.com/swiper/swiper-bundle.min.js"></script>
<link rel="stylesheet" href="https://unpkg.com/swiper/swiper-bundle.min.css" />

<script>
     document.addEventListener('DOMContentLoaded', function () {
          new Swiper('.announcement-slider', {
               slidesPerView: 'auto',
               spaceBetween: 20,
               centeredSlides: true,
               loop: true,
               navigation: {
                    nextEl: '.swiper-button-next',
                    prevEl: '.swiper-button-prev',
               },
               breakpoints: {
                    320: {
                         slidesPerView: 1.2,
                         centeredSlides: true,
                    },
                    640: {
                         slidesPerView: 2,
                         centeredSlides: false,
                    },
                    1024: {
                         slidesPerView: 3,
                         centeredSlides: false,
                    },
               },
               autoplay: {
                    delay: 2000,
                    disableOnInteraction: false,
               },
          });
     });
</script>